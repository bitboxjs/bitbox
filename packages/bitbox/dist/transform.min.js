/*!
 * bitbox/transform.min.js v1.2.18
 * 
 * Author: Sergiu Toderascu <sergiu.toderascu@gmail.com> (http://bitboxjs.com)
 * License: MIT
 * Date: Wed Aug 10 2016 23:24:00 GMT+0300 (EEST)
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.transform=t():e.transform=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/",t(0)}({0:function(e,t,r){"use strict";e.exports=r(133).default},133:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return(0,s.default)(e,{h:"box"})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(134),s=n(i);o.load=function(){var e=document.querySelectorAll('script[type="bitbox"]');e&&(console.warn("loading "+e.length+" scripts"),Array.prototype.map.call(e,function(e){if(e.bitboxLoaded)console.warn("already loaded @ "+e.bitboxLoaded+", ignore");else{e.bitboxLoaded=Date.now();var t=o(e.textContent),r=document.createElement("script");r.textContent=t,document.body.appendChild(r)}}))},t.default=o},134:function(e,t,r){/*!
	 * bitbox-transpiler v1.0.22
	 * (c) 2016 Sergiu Toderascu <sergiu.toderascu@gmail.com> (http://bitboxjs.com)
	 * Released under the ISC License.
	 */
!function(e,r){r(t)}(this,function(e){"use strict";function t(e){return"function"==typeof e||!1}function r(e){e=e||{};var r={},n=0;return e.events={},e.getEvents=function(){return Object.keys(r)},e.update=function(t,r){var n={};if(r&&"string"==typeof t){var o=t;t={},t[o]=r}t&&"object"===("undefined"==typeof t?"undefined":c(t))&&Object.keys(t).map(function(r){e[r]!==t[r]&&(n[r]={old:e[r],"new":t[r]},e[r]=t[r])}),e.emit("update",t,n)},e.sub=function(o,i){return t(i)&&(i._id="undefined"==typeof i._id?n++:i._id,o.replace(/\S+/g,function(e,t){(r[e]=r[e]||[]).push(i),i.typed=t>0})),e},e.on=function(){var o=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],i=arguments[1];return t(i)&&(i._id="undefined"==typeof i._id?n++:i._id,Array.isArray(o)||(o=[o]),o.map(function(t){"listener"!==t&&"update"!==t&&(e.events[t]=!0,e.emit("listener",t)),(r[t]=r[t]||[]).push(i)})),e},e.off=function(t,n){return"*"==t?r={}:(Array.isArray(t)||(t=[t]),t.map(function(e){if(n)for(var t,o=r[e],i=0;t=o&&o[i];++i)t._id==n._id&&(o.splice(i,1),i--);else r[e]=[]})),e},e.one=function(t,r){function n(){e.off(t,n),r.apply(e,arguments)}return e.on(t,n)},e.pub=function(t){for(var n,o=[].slice.call(arguments,1),i=r[t]||[],s=0;n=i[s];++s)n.busy||(n.busy=1,n.apply(e,n.typed?[t].concat(o):o),i[s]!==n&&s--,n.busy=0);return r.all&&"*"!=t&&e.trigger.apply(e,["*",t].concat(o)),e},e.emit=function(t){for(var n,o=[].slice.call(arguments,1),i=r[t]||[],s=0;n=i[s];++s)n.busy||(n.busy=1,n.apply(e,n.typed?[t].concat(o):o),i[s]!==n&&s--,n.busy=0);return r.all&&"*"!=t&&e.trigger.apply(e,["*",t].concat(o)),e},e.trigger=function(t){for(var n,o=[].slice.call(arguments,1),i=r[t]||[],s=0;n=i[s];++s)n.busy||(n.busy=1,n.apply(e,n.typed?[t].concat(o):o),i[s]!==n&&s--,n.busy=0);return r.all&&"*"!=t&&e.trigger.apply(e,["*",t].concat(o)),e},e}function n(e){e.source=e.source.replace(/<([a-z0-9-]+)(.*)=>(.*)<\/([a-z0-9-]+)>$/gm,"<$1$2=>$3"),b[e.name]=e}function o(e){return e}function i(e){var t=arguments.length<=1||void 0===arguments[1]?": ":arguments[1],r=arguments.length<=2||void 0===arguments[2]?", ":arguments[2],n=h({},e),o=Object.keys(n),i=[];return o.forEach(function(e){var r=n[e];"class"===e?i.push("className"+t+r):"style"===e?i.push(""+e+t+r):0===e.indexOf("...")?i.push(""+s(e)):e===r?i.push(""+s(e)):i.push(""+s(e)+t+r)}),i.join(r)}function s(e,t){if(e&&e.indexOf("-")>-1){var r=e.split("-");e=r.map(function(e,r){return t||0!==r?e.substr(0,1).toUpperCase()+e.substr(1):e}).join("")}return t?e.substr(0,1).toUpperCase()+e.substr(1):e}function a(e){return e}function p(e){this.parent=e,this.content="",this.spacer="",this.indent=e?e.indent:"",this.isFirstItem=!0}function l(e,t){e=e.replace(/(\()(<([a-z0-9-]+)(.*)=>([^\n<\/]+))(\))$/gm,"(<$3$4=>$5</$3>)"),e=e.replace(/<([a-z0-9-]+)(.*)=>([^\n<\/]+)$/gm,"<$1$2=>$3</$1>");var r=(new _).transform(e,t);return r.code=r.code.replace(/export(\w)/g,"export $1").replace(/export\sdefault(\w)/g,"export default $1").replace(/return(\w)/g,"return $1"),r.code}function u(e){return l(e.source)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},y={content:"content",a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},b={},g={h:"box",element:"bitbox.element"},v=[],x={},k={clearMeta:function(){x={"import":{},"export":{},local:{}}},mustreturn:!1,lastNode:null,methods:[],pairs:{},routes:[],init:[],inlineThunks:[],body:"",observableKeys:[],delegateKeys:[],box:[],imports:[],exports:[],boxes:[],keys:{},bits:[],_style:function(e,t){return e.props.scope='{ name: "'+e.parent.name+'", key: '+e.parent.props.key+" }",e.attrs.push({key:"text",type:"keyed",value:"text"}),this.tag(e,t)},_script:function(e,t){return e.attrs.push({key:"text",type:"keyed",value:"text"}),this.tag(e,t)},styles:[],inits:[],convertprops:i,objectToArray:function(e){return Object.keys(e).map(function(t){return e[t]})},selfClosing:function(e,t){return e.content=-1,this.tag(e,t)},tag:function(e,t){g=h({},g,t),this.lastNode=e;var r=y[e.name]===e.name,a="",p="",l="",u="";if(e.object||(e.object={}),e.object.attributes=[].concat(m(e.attrs)),e.attrs.length)for(var c in e.attrs){var d=e.attrs[c];if(d){if(d.rel&&"def"===d.rel){e.jsname=s(e.name),e.type="box",this.boxes.push(e);var f=d.value.trim();f=f?f.substr(0,f.length-1)+")":null,e.args=f;var b=["",""];"root"===e.parent||"mod"===e.parent.name;var k="",_="";"root"!==e.parent&&"mod"!==e.parent.name||e.props.export&&(k="\nexport ",e.props.default&&(k+="default "),delete e.props.export,delete e.props.default);this.bits.filter(function(e,t,r){return r.indexOf(e)===t}).map(function(e){return e[0]+": "+e[1]}).join(",");if(this.bits=[],a+="\n\t\t\t\t\t\t"+k+b[0]+" function "+s(e.name)+f+" {\n                            const "+g.h+" = arguments[1];\n                            ","root"===e.parent){var w=Object.keys(x.local).map(function(t){return"new bitbox("+e.jsname+"$box, "+t+")"});a+="const $box = arguments[1];\n",a+=this.inits.join("\n")+"\n",a+=w.join("\n")+"\n",this.keys={},this.inits=[],a=a.replace(/this\$box/g,e.jsname+"$box"),e.content=e.content.replace(/this\$box/g,e.jsname+"$box")}u+="\n}"+b[1]+_,delete e.props[d.key]}switch(d.key){case"text":d.value&&(e.content="`"+e.body.replace(/\`/gm,"\\`")+"`"),delete e.props.text;break;case"snippet":e.snippet=d.value,e.snippet&&(e.props.snippet=e.body?"`"+e.body.replace(/\`/gm,"\\`")+"`":null);break;case"if":a+="if "+d.value+" {",u="}",e.parent._if=!0,delete e.props.if;break;case"else":a+="else {",u="}",delete e.props.else;break;case"for":"invoke"===d.rel&&(p+="for "+d.value+" {",l="}",e.__tree=!0,delete e.props.for);break;case"switch":p+="switch "+d.value+" {",l="}",e._switch=!0,delete e.props.switch}if(d.key.endsWith(".map")){if(e.childrens>1)throw new Error("Only one root element allowed for map, got "+e.childrens+"\n"+e.body);p+=d.key+"("+d.value+" => ",l=")",delete e.props[d.key]}if(d.key.endsWith(".each")&&(p+=d.key.replace(".each",".forEach")+"("+d.value+" => {",l="})",e.__tree=!0,delete e.props[d.key]),"invoke"===d.rel&&e.props[d.key]){e.invoke=e.name+"."+d.key+d.value;var j=d.key.startsWith("-")?d.key.substr(1):d.key;e.props[d.key]=""+s(j)+d.value}}}e.return&&(e.content="return ("+e.content+")");var $="";if(e.props.export&&($="\nexport ",e.props.default&&($+="default "),delete e.props.export,delete e.props.default),e.props.case){var O="case "+e.props.case+":";if(e.props.key="'case-"+e.props.case.replace(/['"`]/g,"")+"'",e.props.case===!0){var C=Object.keys(e.props),A=C[C.indexOf("case")+1];e.props.key=A,delete e.props[A],O="default"===A?"default:":"case '"+A+"':"}a=""+O,u="break;",delete e.props.case}e.props.default&&e.parent.props.switch&&(a="default:",u="break;",delete e.props.default);var S=e.props?""+i(e.props):"",W="",E="",z=e.name;if("box"!==e.type)if("mod"===e.name)W="",E="";else if(z=""+s(e.name),e.content===-1){if(e.content="",e.invoke_zz);else if(x.local[z+"__s"]);else{var P=z;e.key&&($=""+$+(e.key.indexOf(".")>-1?"":"const ")+s(e.key)+" = ");var q=e.parent.box||"root"===e.parent.parent?["",""]:["$tree.push(",");"],M=!1;e.props.new&&(M=!0,delete e.props.new),(e.props.return||e.parent.box)&&(q=["return(",")"],delete e.props.return),e.object.key=P,e.object.props="{"+S+"}";var G=e.comprop||e.dotprop||z,N="element"===G?""+g.element:G;e.parent.childrens="undefined"!=typeof e.parent.childrens?e.parent.childrens+1:1;var U=h({},e.props);S=U?""+i(U):"";var L=e.props.props||e.props["@"]?""+(e.props.props||e.props["@"].substring(1)):S?"{ "+S+" }":"",T=!e.name.startsWith("bitbox");W=M||r?""+q[0]+g.h+"('"+e.name+"'"+(L?",":"")+L+")"+q[1]:T?""+q[0]+g.h+"("+N+(L?",":"")+L+")"+q[1]:""+q[0]+N+"("+L+")"+q[1]}E=""}else if(x.local[z+"__s"]);else{e.key&&($=""+$+(e.key.indexOf(".")>-1?"":"const ")+s(e.key)+" = ");var I=e.parent.box||"root"===e.parent.parent?["",""]:["$tree.push(",");"],K=!1;e.props.new&&(K=!0,delete e.props.new),(e.props.return||e.parent.box)&&(I=["return(",")"],delete e.props.return);var B=e.comprop||e.dotprop||z,D="element"===B?""+g.element:B,F=e.content.trim().length,H=/^\$tree\.push\(([\s\S]*)\)\;$/g,J=e.childrens>1||e._if||e._switch||e.__tree?["($tree => {","return $tree })([])"]:["",""];if(e.parent.childrens="undefined"!=typeof e.parent.childrens?e.parent.childrens+1:1,1!==e.childrens||e.__tree||(e.content=e.content.trim().replace(H,"$1")),2==e.snippet){var Q=o(e.content,{indent_with_tabs:!0,indent_size:4}),R=e.props.snippet;Q="`"+Q.replace(/\`/gm,"\\`")+"`",e.props.snippet="{ in: "+R+", out: "+Q+" }"}var V=h({},e.props);S=V?""+i(V):"";var X=e.props.props||e.props["@"]?""+(e.props.props||e.props["@"].substring(1)):S?"{ "+S+" }":"",Y=!e.name.startsWith("bitbox");W=K||r?""+I[0]+g.h+"('"+e.name+"'"+(X?",":"")+X+(F?",":"")+J[0]:Y?""+I[0]+g.h+"("+D+(X?",":"")+X+(F?",":"")+J[0]:""+I[0]+D+"("+X+(X&&F?",":"")+J[0],E=J[1]+")"+I[1]}else if(e.returning)W="/** return **/\n",E="";else{var Z=h({},e.parent.props,e.props);delete Z.export,delete Z.default,delete Z[e.parent.name],S=Z?", {"+i(Z)+" }":"",z="'"+e.name+"'";e.args.replace("(","").replace(")","").split(","),e.props.register?"string"==typeof e.props.register&&e.props.register.indexOf("-")>-1?e.props.register:"'"+e.name+"-box'":"'"+e.name+"'";if(e.childrens>1)throw new Error("Box must have only one root element, got "+e.childrens+"\n"+e.body);W="",E="",n({js:(""+a+W+p+e.content+l+E+u).trim(),source:""+e.tag+e.body+"</"+e.name+">",name:""+e.name})}v[e.i]="undefined"!=typeof v[e.i]?v[e.i]+1:1;var ee="",te=""+$+a+W+ee+p+e.content+l+E+u;return te.trim()},isString:function(e){var t=/['"`]([^'`"]+)["'`]/g;return t.exec(e.trim())}};p.prototype.addSpace=function(e){this.spacer+=e,e.indexOf("\n")!==-1?this.indent=/[^\n]*$/.exec(e)[0]:this.indent+=e},p.prototype.add=function(e,t){this.content+=this.spacer,this.spacer="",this.content+=e};var _=function(){function e(){var t=this;arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,e),r(this),this.token={},this.chars=[],this.index=[],this.attrs=[],this.props={},this.nodes=[],this.text=[],this.tree={},this.result="",this.node={},this.token={"<":1,"</":1};var n=[],o=new p(null);o=new p(null);var i=0,s=!1;this.on("open",function(e,t){i++,"___bitbox"===e?t.component={key:t.attrs[0].key,attr:t.attrs}:t.component=t.parent.component,n.unshift([e,t.attrs]),o=new p(o),s=!0}),this.on("text",function(e){var t=e.split("\n"),r=!0;t.forEach(function(e){var t=/^(\s*)(.*?)(\s*)$/.exec(e),n=(t[1],t[2]);t[3];if(r||o.addSpace("\n"),n.length>0){var i=n[0];s!==!0||"`"!==i&&"'"!==i&&'"'!==i?o.add(n):o.add(n)}r=!1})}),this.on("close",function(e,r){s=!1;var a=(n.shift(),o.content);o=o.parent,r.content=a,"function"==typeof k[e]?o.add(k[e](r,t.options)):o.add(k.tag(r,t.options)),i--}),this.on("self-closing",function(e,r){"function"==typeof k[e]?o.add(k[e](r,t.options)):o.add(k.selfClosing(r,t.options))}),this.on("done",function(){t.compiled=o.content,t.write(t.compiled),o=new p(null)}),this.extract()}return f(e,[{key:"balanced",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=e.out?e.out:e.input,n=0,o=[],i=[],s="<",a=-1,p=0,l=0,u=0,c=!1,d=[],f=void 0,h=t.map(function(e){return e.charAt(0)}),m=t.map(function(e){return e.charAt(1)}),y=null,b=null,g=!1,v=r;e.pairs={},e.error=!1,e.return=!1,e.out="",e.props=e.props?e.props:[];var x=/^<([^\(\s\=\/\>]+)/,k=x.exec(r);if(k){var _=k[1].split(":");if(e.name=_[0],e.name.indexOf("[")>-1){var w=e.name.replace(/\[/g,".").replace(/\]/g,".");v=r=r.replace(e.name,w),e.comprop=""+e.name,e.name=w}e.name.indexOf(".")>-1&&(e.dotprop=""+e.name),e.key=_[1]||null}for(var j=0;j<r.length;j++){var $=r.charAt(j);if(e.pos=j,$===s&&"/"!==r.charAt(j+1)&&a===-1&&(a=j,p=j),a>-1){if(!g){var O=h.indexOf($);O>-1&&(y=$,b=m[O])}if($===y){if(g=y,n++,o.push(j),!c){var C=r.substring(0,j),A=C.replace(/\s+/g," ").split(" "),S=A.pop();f=S.length?S:A.pop()+" ",d.unshift(f)}c=!0}else if($===b){if(n--,i.push(j),0===n){var W=d.shift(),E=W.endsWith("=")?"assign":"invoke";0===W.indexOf("<")&&(e.box=!0,W=W.substr(1),E="def");var z=y+b;g=!1,y=null,b=null,c=!1,l=o.shift(),u=i.pop();var P=r.substring(l,u+1);e.__i=e.props.push({key:W.trim().replace("=",""),value:P,type:z,rel:E}),v=v.replace(W+P,e.__i),o=[],i=[]}if(n<0)return e.error="c < 0",e}if(">"===$&&0===n){"="===r[j-1]&&(e.return=!0),"/"===r[j-1]&&(e.selfClosing=!0);var q=r.substring(a,j+1);return e.tag=q,v=v.substring(p+1,j),v=v.split(">").shift().trim(),(e.return||e.selfClosing)&&(v=v.substring(0,v.length-1).trim()),a=0,e.out=v.replace(/\s+/g," ").trim(),e}}}return 0===n?e:(e.error="c !== 0",e)}},{key:"extract",value:function(){var e=this,t=0,r=null,n=0;this.on("<",function(o,i){var s=e.string(o);if(0!==s.indexOf("</")){var a=o+i.length,p=(s.slice(a),s),l=null;if(p.length){l=e.balanced({input:p,__i:0},["()","{}","[]"]),l.out=l.out.replace(/([\w\-]+)\s?=?\s?['"`]([^'`"]+)["'`]/g,function(e,t,r){var n="static";return l.__i=l.props.push({key:t,value:r,type:n,rel:"assign"}),l.__i}),n=o+l.pos,l.out.startsWith(l.name)&&(l.out=l.out.substr(l.name.length)),l.out=l.out.trim();var u=l.out.split(" ").map(function(e){var t=parseInt(e);if(t)return l.props[t-1];if(e.length){var r=e.split("=");return 2===r.length?{key:r[0].startsWith("-")?"arg"+r[0]:r[0],value:r[1],type:"value"}:0===e.indexOf("...")?{key:e,type:"spread"}:{key:e.startsWith("-")?"arg"+e:e,value:!!e.startsWith("-")||e,type:"keyed"}}return null});l.props=u}l&&l.name&&!l.error&&!function(){var n=l.tag||"",s=l.name,a=l.key,p=l.props,u={};p.forEach(function(e,t){e&&(e.key===":"+a?delete l.props[t]:u[e.key]="static"===e.type?"'"+e.value+"'":e.value)});var c=e.index[e.index.length-1]?e.index[e.index.length-1]:"root";r={i:t,tag:n,name:s,key:a,attrs:p,props:u,parent:c,start:{pos:o,tok:i}},r.type=l.selfClosing?"self-closing":"normal",r.box=l.box;var d=r.name.match(/([a-z-0-9.]+)/);if(r.name=r.name&&d?d[1]:r.name,r.camelName=e.toCamel(r.name),r.comprop=l.comprop,r.dotprop=l.dotprop,e.text.length){var f=e.text.pop();f&&e.emit("text",e.string(f,o))}e.node=r,l.selfClosing?(r.body=null,e.text.push(o+n.length),e.emit("self-closing",s,r),e.emit("node",r)):(e.index.push(r),e.emit("open",s,r),e.text.push(o+n.length)),t++}()}}),this.on("</",function(n,o){var i=e.index.pop();if(i){var s=e.string(n,n+o.length+i.name.length+1);s==="</"+i.name+">"?(t--,r=i):(r=null,e.index.push(i))}if(r){if(r.body=e.string(r.start.pos+r.tag.length,n),r.box){var a=/(.+return([^<\/>]+)<\/>)/gm,p=a.exec(r.body+"</>");p&&(r.returning=p[2].trim())}if(r.end={pos:n,tok:o},r.type="normal",e.text.length){var l=e.text.pop();l&&e.emit("text",e.string(l,n))}e.text.push(n+o.length+r.name.length+1),e.emit("close",r.name,r),e.emit("node",r)}})}},{key:"toCamel",value:function(e,t){if(e&&e.indexOf("-")>-1){var r=e.split("-");e=r.map(function(e,r){return t||0!==r?e.substr(0,1).toUpperCase()+e.substr(1):e}).join("")}return t?e.substr(0,1).toUpperCase()+e.substr(1):e}},{key:"exprattr",value:function(e){e=e.replace(/\n/g," ").replace(/\t/g,"").trim();var t=/((\w+\.)+)?(\w+)\s?(\([^)]+\))/gi,r=[],n=e.replace(t,function(e,t,n,o,i,s){return r.push({type:o,expr:i,obj:t}),""});return{result:n,exprs:r}}},{key:"string",value:function(e,t){return"string"==typeof e?(this._string=e,this.result=this._string,this._string):this._string.slice(e,t)}},{key:"update",value:function(e,t){var r=this,n={};if(t&&"string"==typeof e){var o=e;e={},e[o]=t}e&&"object"===("undefined"==typeof e?"undefined":c(e))&&Object.keys(e).map(function(t){r[t]!==e[t]&&(n[t]={old:r[t],"new":e[t]},r[t]=e[t])}),this.emit("update",e,n)}},{key:"run",value:function(){var e=this;this.chars=[],this.index=[],this.attrs=[],this.props={},this.nodes=[],this.text=[],this.tree={},this.result="",this.compiled="",this.emit("run",this.token);var t=this.string(0),r=!0,n=!1,o=void 0;try{for(var i,s=function(){var t=i.value,r=e.chars.push(t)-2;'"'!==t&&"`"!==t&&"'"!==t&&Object.keys(e.token).forEach(function(t){var n=e.string(r).startsWith(t);n===!0&&e.emit(t,r,t)})},a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)s()}catch(p){n=!0,o=p}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return this.emit("done"),this.compiled}},{key:"fromString",value:function(e,t){return this.fn=t,this.source=e,this.string(e),this.emit("ready"),this.run()}},{key:"parse",value:function(e,t,r){return k.clearMeta(),k.boxes=[],this.fn=r,this.options=t,this.source=e,this.string(e),this.emit("ready"),this.run(),"function"==typeof r?r.call(null,this.source,this.compiled):a(this.compiled,{indent_with_tabs:!0,indent_size:4})}},{key:"transform",value:function(e,t){return{code:this.parse("<mod>"+e+"</mod>",t),node:this.node}}},{key:"write",value:function(e){"function"==typeof this.fn&&this.fn.call(null,this.source,e)}}]),e}();e.translate=u,e.default=l,Object.defineProperty(e,"__esModule",{value:!0})})}})});